# 解决SSH权限被拒绝问题

## 问题分析

1. **错误信息**：`git@20.205.243.166: Permission denied (publickey).`

2. **根本原因**：
   - 缺少SSH密钥对（id_rsa和id_rsa.pub）
   - 没有将公钥添加到GitHub账户中
   - SSH客户端无法向GitHub服务器证明身份

3. **当前状态**：
   - SSH配置文件已正确设置（~/.ssh/config）
   - GitHub服务器公钥已添加到known_hosts文件
   - 缺少SSH密钥对

## 解决方案

### 1. 生成SSH密钥对

**步骤**：
- [ ] 使用PowerShell生成SSH密钥对
- [ ] 选择默认位置（~/.ssh/id_rsa）
- [ ] 设置空密码（便于自动化使用）

**命令**：
```bash
ssh-keygen -t rsa -b 4096 -C "your_email@example.com" -f "$HOME/.ssh/id_rsa" -N ""
```

### 2. 查看并复制公钥

**步骤**：
- [ ] 查看生成的公钥文件
- [ ] 复制公钥内容，准备添加到GitHub账户

**命令**：
```bash
Get-Content -Path "$HOME/.ssh/id_rsa.pub"
```

### 3. 将公钥添加到GitHub账户

**步骤**：
1. 登录GitHub账户
2. 点击右上角头像 → `Settings`
3. 点击左侧菜单 → `SSH and GPG keys`
4. 点击右上角 → `New SSH key`
5. 添加一个标题（如"Windows PC"）
6. 将复制的公钥粘贴到`Key`字段
7. 点击 `Add SSH key` 保存

### 4. 验证SSH连接

**步骤**：
- [ ] 测试SSH连接是否成功
- [ ] 确认可以连接到GitHub服务器

**命令**：
```bash
ssh -T git@github.com
```

### 5. 重新尝试Git推送

**步骤**：
- [ ] 执行git push命令
- [ ] 确认更改已成功推送到远程仓库

**命令**：
```bash
git push origin main
```

## 预期结果

- SSH密钥对成功生成
- 公钥成功添加到GitHub账户
- SSH连接测试成功，显示欢迎信息
- Git推送成功，更改推送到远程仓库
- GitHub Actions工作流能够成功运行

## 注意事项

1. **邮箱地址**：使用与GitHub账户关联的邮箱地址
2. **权限设置**：确保私钥文件权限正确（Windows会自动处理）
3. **SSH代理**：如果使用SSH代理，需要确保代理配置正确
4. **防火墙**：确保防火墙允许SSH流量通过（端口22）
5. **GitHub状态**：检查GitHub状态页，确保服务正常

通过以上步骤，预计能够解决SSH权限被拒绝的问题，成功将修复的构建工作流推送到远程仓库。