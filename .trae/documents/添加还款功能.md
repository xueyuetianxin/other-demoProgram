# 添加还款功能

## 1. 数据模型扩展

### types/index.ts
- 添加 `Payment` 接口：记录每次还款
  - id, amount, date, type (daily/monthly), notes
- 在 `Rental` 接口中添加：
  - `payments: Payment[]` - 还款记录数组

## 2. 计算逻辑更新

### utils/calculator.ts
- 修改 `calculateTotalPaid`：累加所有还款金额 + 押金
- 添加 `calculateDailyPaid`：计算当日还款金额
- 添加 `calculateMonthlyPaid`：计算当月还款金额
- 添加 `checkDailyPaymentComplete`：检查当日还款是否完成
- 添加 `checkMonthlyPaymentComplete`：检查当月还款是否完成

## 3. 上下文管理更新

### context/RentalContext.tsx
- 添加 `addPayment` 方法：添加还款记录
- 添加 `updatePayment` 方法：修改还款记录
- 添加 `deletePayment` 方法：删除还款记录

## 4. UI 组件更新

### components/RentalList.tsx
- 添加"还款"按钮
- 显示当日/当月还款状态标签
- 显示已还款金额

### components/PaymentForm.tsx (新建)
- 还款表单组件
- 选择还款类型（当日/当月）
- 输入还款金额
- 添加备注

### components/PaymentHistory.tsx (新建)
- 显示还款历史记录
- 支持编辑和删除还款

## 5. 提醒逻辑更新

### utils/reminder.ts
- 检查当日/当月还款是否完成
- 未完成时发送提醒通知

## 实现效果
- 可以记录每次还款的金额和时间
- 区分当日还款和当月还款
- 可以调整还款金额
- 显示当日/当月还款完结状态
- 未完成时自动提醒